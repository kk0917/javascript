<!DOCTYPE html>
<html xml:lang="ja" lang="ja">
<head>
<meta charset="utf-8">
<meta name=”robots” content=”noindex,nofollow”/>
<title>JavaScript TechnicalNote － SAMPLE</title>
<link rel="stylesheet" href="../../common/css/common.css">
<style>
.scrollEvent {
  height: 500px;
  text-align: left;
  display: none;
}
.area1 { background: #fff; }
.area2 { background: #eee; }
.area3 { background: #ddd; }
.area4 { background: #ccc; }
.area5 { background: #bbb; }
.area6 { background: #aaa; }
p {
  padding: 100px 0;
  text-align: center;
}
</style>
</head>

<body>

<header class="baseHeader">
<div>
<h1>jQuery TECHNIQUE</h1>
<a href="../../chapterList.html">&gt;&nbsp;CHAPTER LIST</a>
</div>
</header>

<h2 id="title">スクロールして特定の位置にたどり着いたらアニメーションを実行する</h2>

<div id="wrapper">

<div class="scrollEvent area1"><p>ここは、コンテンツエリア【1】です</p></div>
<div class="scrollEvent area2"><p>ここは、コンテンツエリア【2】です</p></div>
<div class="scrollEvent area3"><p>ここは、コンテンツエリア【3】です</p></div>
<div class="scrollEvent area4"><p>ここは、コンテンツエリア【4】です</p></div>
<div class="scrollEvent area5"><p>ここは、コンテンツエリア【5】です</p></div>
<div class="scrollEvent area5"><p>ここは、コンテンツエリア【6】です</p></div>

</div><!-- /#wrapper -->

<footer class="baseFooter">
<small>Copyright &copy; kkkk. All Rights Reserved.</small>
</footer>

<script src="../jquery-1.12.4.min.js"></script>
<script>
// スクロールにより後から表示するコンテンツ要素を変数に代入
var setArea    = $( ".scrollEvent" );
// コンテンツ要素の上部から何px過ぎた時点でアニメーションを実行させるか設定する
var showHeight = 150;
// コンテンツ要素を表示、透過0に設定しておく
setArea.css({display:"block", opacity:"0"});

$( window ).on("load scroll resize", function() {
  // 各コンテンツ要素にアニメーション処理を実行
  setArea.each(function() {
    // コンテンツ要素の、documentの上端空要素までの距離をセット
    var areaTop = $( this ).offset().top;

    // コンテンツ要素がウィンドウに表示されてから150pxを過ぎたらフェードインさせる
    if ($( window ).scrollTop() > (areaTop + showHeight) - $( window ).height()) {
      $( this ).stop().animate({opacity:"1"}, 500);
    } else {
      // これまで表示されていたコンテンツ要素があと150pxでウィンドウから見えなくなるという位置でフェードアウト
      $( this ).stop().animate({opacity:"0"}, 500);
    }
  })
});

</script>
</body>
</html>
